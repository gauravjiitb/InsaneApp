<!DOCTYPE html>
{% load static %}
{% load widget_tweaks %}
{% load bootstrap4 %}
{% load crispy_forms_tags %}

<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title></title>
  </head>
  <body>

    <form method="post" action="">
      {% csrf_token %}

      <div class="modal-header">
        <h3 class="modal-title">Pax Details</h3>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>

      <div class="modal-body">

        <div class="{% if form.non_field_errors %}invalid{% endif %} mb-2">
          {% for error in form.non_field_errors %}
            {{ error }}
          {% endfor %}
        </div>

        {% for field in pax_form %}
          <div class="form-group">
            <label for="{{ field.id_for_label }}">{{ field.label }}</label>
            {% render_field field class="form-control" placeholder=field.label %}
            <div class="{% if field.errors %} invalid{% endif %}">
              {% for error in field.errors %}
                <p class="help-block">{{ error }}</p>
              {% endfor %}
            </div>
          </div>
        {% endfor %}

        <br>
        <h5>Select Dates and Cities below.</h5>
        <br>
        <div class="places-details-row row">
          {% for field in places_form %}
            <div class="col">
              <div class="form-group">
                {% render_field field class="form-control" placeholder=field.label %}
                <div class="{% if field.errors %} invalid{% endif %}">
                  {% for error in field.errors %}
                    <p class="help-block">{{ error }}</p>
                  {% endfor %}
                </div>
              </div>
            </div>
          {% endfor %}
          <div class="col-1"><button class="btn btn-success" type="button" name="button">+</button></div>
        </div>



      </div>



      <div class="modal-footer">
        <button type="button" class="submit-btn btn btn-primary">Next</button>
      </div>

    </form>

<script>

    $("label[for*='children_age']").parent().hide();
    $("input#id_children").on('change',function(){
      var n = $(this).val();

      if (n == 0) {
        template = "<label for='id_children_age'></label>";
        $("label[for*='children_age']").parent().hide();
      } else{
        template = "<label for='id_children_age'>Children age</label>";
        for(var i = 0; i < n; i++){
          template += `<input type="number" name="children_age" placeholder="Children age" class="form-control" required="" id="id_children_${i}_age" >`;
        }

      }
      $("label[for*='children_age']").parent().html(template);
      $("label[for*='children_age']").parent().show();
    });

</script>


  </body>
</html>
